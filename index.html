<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <title>Crypto Portfolio Dashboard</title>
  <meta name="description" content="Minimal local-first crypto portfolio dashboard with live pricing, alerts, charts and scenario modelling. Data fetched from public APIs." />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="icon" href="/favicon.ico" />
  <link rel="manifest" href="/site.webmanifest" />
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4" defer crossorigin="anonymous"></script>
  <style>
    :root { color-scheme: dark; }
    .theme-light { color-scheme: light; }
    html, body { max-width: 100%; overflow-x: hidden; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Inter", sans-serif;
      font-size: 15px;
    }
    body.theme-light {
      background:
        radial-gradient(circle at 12% 18%, rgba(59,130,246,0.12), transparent 32%),
        radial-gradient(circle at 86% 14%, rgba(56,189,248,0.12), transparent 28%),
        radial-gradient(circle at 22% 78%, rgba(14,165,233,0.1), transparent 30%),
        radial-gradient(circle at 76% 82%, rgba(148,163,184,0.14), transparent 30%),
        linear-gradient(135deg, rgba(241,245,249,0.9), rgba(226,232,240,0.82));
      color: #0f172a;
    }
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-thumb { background: rgba(148,163,184,.6); border-radius: 999px; }
    ::-webkit-scrollbar-track { background: transparent; }

    /* Make the smallest text classes more legible without touching layout. */
    .text-[11px] { font-size: 12.5px !important; }
    .text-[10px] { font-size: 12px !important; }
    .text-[9px] { font-size: 11px !important; }
    canvas { display: block; }

    .glass-surface {
      background: linear-gradient(135deg, rgba(15,23,42,0.82), rgba(15,23,42,0.74));
      border: 1px solid rgba(148, 163, 184, 0.15);
      box-shadow: 0 10px 40px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.03);
      backdrop-filter: blur(16px);
    }
    .theme-light .glass-surface {
      background:
        linear-gradient(135deg, rgba(255,255,255,0.86), rgba(226,232,240,0.78)),
        linear-gradient(115deg, rgba(59,130,246,0.08), rgba(14,165,233,0.05));
      border: 1px solid rgba(148,163,184,0.38);
      box-shadow: 0 20px 48px rgba(15,23,42,0.14), inset 0 1px 0 rgba(255,255,255,0.72);
      backdrop-filter: blur(18px) saturate(110%);
    }
    .gradient-border {
      position: relative;
      border: 1px solid transparent;
      background-clip: padding-box;
    }
    .gradient-border::before {
      content: "";
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      padding: 1px;
      background: linear-gradient(120deg, rgba(16,185,129,0.55), rgba(56,189,248,0.3));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }
    .theme-light .gradient-border::before {
      background: linear-gradient(120deg, rgba(59,130,246,0.45), rgba(56,189,248,0.35), rgba(16,185,129,0.35));
    }
    .pill-active {
      background: linear-gradient(135deg, rgba(16,185,129,0.24), rgba(56,189,248,0.18));
      color: #e2e8f0;
      box-shadow: 0 0 0 1px rgba(16,185,129,0.55), 0 8px 26px rgba(16,185,129,0.08);
    }
    .theme-light .pill-active {
      background: linear-gradient(135deg, rgba(59,130,246,0.14), rgba(16,185,129,0.18));
      color: #0f172a;
      box-shadow: 0 0 0 1px rgba(59,130,246,0.35), 0 10px 30px rgba(59,130,246,0.12);
    }
    .focus-glow:focus-visible {
      outline: none;
      box-shadow: 0 0 0 1px rgba(16,185,129,0.55), 0 0 0 6px rgba(16,185,129,0.12);
      border-color: rgba(16,185,129,0.65) !important;
    }
    .theme-light .focus-glow:focus-visible {
      box-shadow: 0 0 0 1px rgba(59,130,246,0.45), 0 0 0 6px rgba(59,130,246,0.16);
      border-color: rgba(59,130,246,0.55) !important;
    }
    .ticker-shell {
      overflow: hidden;
      position: relative;
    }
    .ticker-track {
      display: inline-flex;
      gap: 1.5rem;
      animation: ticker 28s linear infinite;
    }
    .ticker-shell:hover .ticker-track { animation-play-state: paused; }
    @keyframes ticker { from { transform: translateX(0); } to { transform: translateX(-50%); } }

    .sparkline {
      position: relative;
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(71,85,105,0.6), rgba(71,85,105,0.2));
      overflow: hidden;
    }
    .theme-light .sparkline {
      background: linear-gradient(90deg, rgba(226,232,240,0.9), rgba(226,232,240,0.35));
    }
    .sparkline::after {
      content: "";
      position: absolute;
      inset: -120% 10% auto 10%;
      height: 220%;
      border-radius: 999px;
      background: linear-gradient(135deg, rgba(16,185,129,0.9), rgba(56,189,248,0.8));
      filter: drop-shadow(0 0 12px rgba(16,185,129,0.35));
      transform: rotate(var(--spark-tilt, 0deg));
      transform-origin: center;
      transition: transform 200ms ease;
    }
    .sparkline.negative::after { background: linear-gradient(135deg, rgba(248,113,113,0.9), rgba(249,115,22,0.8)); }
    .theme-light .sparkline::after {
      background: linear-gradient(135deg, rgba(37,99,235,0.9), rgba(16,185,129,0.85));
      filter: drop-shadow(0 0 12px rgba(37,99,235,0.28));
    }
    .theme-light .sparkline.negative::after { background: linear-gradient(135deg, rgba(248,113,113,0.9), rgba(249,115,22,0.85)); }

    .alloc-pie {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: conic-gradient(var(--alloc-color, #22c55e) calc(var(--alloc, 0) * 1%), rgba(148,163,184,0.2) 0);
      box-shadow: inset 0 0 0 1px rgba(148,163,184,0.25);
      position: relative;
    }
    .alloc-pie::after {
      content: "";
      position: absolute;
      inset: 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      box-shadow: inset 0 0 0 1px rgba(148,163,184,0.25);
    }
    .theme-light .alloc-pie::after {
      background: rgba(255,255,255,0.94);
      box-shadow: inset 0 0 0 1px rgba(148,163,184,0.35);
    }

    .toast-modern {
      position: relative;
      border-radius: 18px;
      background: rgba(15,23,42,0.75);
      border: 1px solid rgba(148,163,184,0.25);
      backdrop-filter: blur(10px);
      box-shadow: 0 20px 60px rgba(0,0,0,0.45);
      padding: 10px 12px;
    }
    .toast-modern::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      padding: 1px;
      background: linear-gradient(145deg, rgba(16,185,129,0.55), rgba(56,189,248,0.4));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }
    .theme-light .toast-modern {
      background: rgba(255,255,255,0.88);
      border-color: rgba(148,163,184,0.45);
      box-shadow: 0 18px 40px rgba(15,23,42,0.18);
      color: #0f172a;
    }
    .theme-light .toast-modern::before {
      background: linear-gradient(145deg, rgba(59,130,246,0.45), rgba(16,185,129,0.35));
    }

    .theme-light .text-slate-100,
    .theme-light .text-slate-200 { color: #0f172a !important; }
    .theme-light .text-slate-300 { color: #334155 !important; }
    .theme-light .text-slate-400 { color: #475569 !important; }
    .theme-light .text-slate-500 { color: #64748b !important; }

    .theme-light .bg-slate-950,
    .theme-light .bg-slate-950/80,
    .theme-light .bg-slate-950/70,
    .theme-light .bg-slate-950/60,
    .theme-light .bg-slate-900,
    .theme-light .bg-slate-900/90,
    .theme-light .bg-slate-900/80,
    .theme-light .bg-slate-900/70,
    .theme-light .bg-slate-900/60,
    .theme-light .bg-slate-900/50,
    .theme-light .bg-slate-900/40,
    .theme-light .bg-slate-900/30,
    .theme-light .bg-slate-800/80,
    .theme-light .bg-slate-800/70,
    .theme-light .bg-slate-800/60,
    .theme-light .bg-slate-800/50,
    .theme-light .bg-slate-700,
    .theme-light .bg-slate-700/50 {
      background: linear-gradient(145deg, rgba(255,255,255,0.9), rgba(226,232,240,0.76));
      border: 1px solid rgba(148,163,184,0.32);
      backdrop-filter: blur(16px) saturate(108%);
      box-shadow: 0 12px 32px rgba(15,23,42,0.14);
    }
    .theme-light .border-slate-900/60,
    .theme-light .border-slate-900,
    .theme-light .border-slate-800,
    .theme-light .border-slate-800/70,
    .theme-light .border-slate-800/60,
    .theme-light .border-slate-800/50,
    .theme-light .border-slate-700,
    .theme-light .border-slate-700/50,
    .theme-light .border-slate-600 {
      border-color: rgba(148,163,184,0.45) !important;
    }
    .theme-light .bg-slate-800/70 span,
    .theme-light .bg-slate-800/70 strong { color: inherit; }

    .theme-light input,
    .theme-light select,
    .theme-light textarea {
      color: #0f172a;
      background: linear-gradient(120deg, rgba(255,255,255,0.9), rgba(226,232,240,0.82));
      border-color: rgba(148,163,184,0.5) !important;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.9), 0 6px 18px rgba(15,23,42,0.08);
    }

    .theme-toggle {
      background: linear-gradient(135deg, rgba(15,23,42,0.9), rgba(15,23,42,0.78));
      border: 1px solid rgba(148,163,184,0.3);
      box-shadow: 0 12px 30px rgba(0,0,0,0.35);
    }
    .theme-light .theme-toggle {
      background: linear-gradient(135deg, rgba(255,255,255,0.94), rgba(224,231,255,0.86));
      box-shadow: 0 14px 32px rgba(59,130,246,0.12);
      border-color: rgba(148,163,184,0.46);
      color: #0f172a;
    }

    @media (max-width: 640px) {
      body { font-size: 14px; }
      .mobile-stack { flex-direction: column; align-items: flex-start; }
      .mobile-stack > * { width: 100%; }
    }
  </style>
</head>
<body class="min-h-screen bg-slate-950 text-slate-100 antialiased">
<div class="min-h-screen flex flex-col">
  <!-- HEADER -->
  <header class="border-b border-slate-900/60 glass-surface">
    <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-10 py-3.5 flex flex-wrap sm:flex-nowrap items-center justify-between gap-4">
      <div class="flex items-center gap-3">
        <div class="relative flex h-9 w-9 items-center justify-center">
          <div class="absolute inset-0 rounded-2xl bg-gradient-to-tr from-emerald-500/30 via-cyan-400/10 to-sky-500/40 blur-md opacity-70"></div>
          <div class="relative flex h-8 w-8 items-center justify-center rounded-2xl border border-emerald-400/60 bg-slate-950/80 ring-1 ring-emerald-400/30">
            <span class="h-2.5 w-2.5 rounded-full bg-emerald-400 shadow-[0_0_14px_rgba(16,185,129,0.95)] animate-pulse"></span>
          </div>
        </div>
        <div>
          <h1 class="text-base sm:text-lg font-semibold tracking-tight flex items-center gap-2">
            Minimal Crypto
            <span class="rounded-full border border-emerald-500/40 bg-emerald-500/10 px-2 py-0.5 text-[10px] font-medium uppercase tracking-[0.18em] text-emerald-300">
              Portfolio
            </span>
          </h1>
          <p class="mt-1 text-xs text-slate-400">
            Clean crypto dashboard with live pricing, TA tools, alerts, risk & news.
          </p>
        </div>
      </div>
      <div class="flex items-center gap-3 text-[11px] sm:text-xs mobile-stack sm:flex-row sm:items-center">
        <div class="hidden sm:flex items-center gap-2 text-slate-400">
          <span class="inline-flex h-2 w-2 rounded-full bg-emerald-400 animate-pulse"></span>
          <span id="price-status">Live prices</span>
          <span id="price-stale" class="hidden rounded-full border border-amber-500/50 bg-amber-500/10 px-2 py-0.5 text-[10px] font-medium text-amber-200">Stale</span>
        </div>
        <div class="hidden sm:flex flex-col items-end text-slate-500">
          <span class="uppercase tracking-[0.16em] text-[9px]">Updated</span>
          <span id="last-updated" class="font-mono text-xs text-slate-300">--</span>
        </div>
        <div class="flex flex-wrap sm:flex-nowrap items-center justify-start sm:justify-end gap-2 w-full sm:w-auto">
          <select id="global-currency-select"
                  class="min-w-[88px] rounded-full border border-slate-700 bg-slate-900/90 px-2 py-1.5 text-[11px] font-medium text-slate-200 focus:outline-none focus:border-emerald-500/70 focus:[...]">
            <option value="usd" selected>USD</option>
            <option value="eur">EUR</option>
            <option value="gbp">GBP</option>
            <option value="jpy">JPY</option>
            <option value="aud">AUD</option>
            <option value="cad">CAD</option>
          </select>
          <button id="refresh-btn"
                  class="inline-flex items-center justify-center gap-1.5 rounded-full border border-slate-700 bg-slate-900/90 px-3 py-1.5 text-[11px] font-semibold hover:border-emerald-400/70 hov[...]">
            <span id="refresh-dot" class="h-1.5 w-1.5 rounded-full bg-emerald-400 shadow-[0_0_12px_rgba(16,185,129,0.9)]"></span>
            Refresh
          </button>
          <button id="theme-toggle" type="button"
                  class="theme-toggle inline-flex items-center justify-center gap-1.5 rounded-full border px-3 py-1.5 text-[11px] font-semibold text-slate-100 hover:border-emerald-400/70 hover:te[...]">
            <span id="theme-dot" class="h-1.5 w-1.5 rounded-full bg-emerald-400 shadow-[0_0_12px_rgba(16,185,129,0.9)]"></span>
            <span id="theme-label">Dark</span>
          </button>
        </div>
        <div class="hidden sm:flex items-center gap-2 text-[10px] text-slate-400">
          <div class="relative w-44">
            <span class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-[11px] text-slate-600">ðŸ”‘</span>
            <input id="cg-api-key" type="password" placeholder="CoinGecko API key (optional)"
                   class="w-full rounded-full border border-slate-800 bg-slate-900/80 pl-8 pr-3 py-1.5 text-[10px] text-slate-200 placeholder:text-slate-600 focus:border-emerald-400/70 focus:outl[...]
          </div>
          <button id="cg-api-save" class="rounded-full border border-slate-700 bg-slate-900/90 px-3 py-1.5 text-[10px] font-medium hover:border-emerald-400/70 hover:text-emerald-200 focus-visible[...]
        </div>
      </div>
    </div>
  </header>

  <!-- MARKET SENTIMENT STRIP -->
  <div class="border-b border-slate-900/60 glass-surface px-4 py-2">
    <div class="max-w-screen-xl mx-auto flex flex-wrap items-center justify-between gap-4 text-[10px] sm:text-[11px] px-4 sm:px-6 lg:px-10">
      <div class="ticker-shell w-full sm:w-auto">
        <div class="ticker-track">
          <div class="flex items-center gap-2">
            <span class="uppercase tracking-widest text-slate-500 font-normal">Fear & Greed</span>
            <div class="flex items-center gap-1.5">
              <div id="fng-value" class="font-semibold text-slate-200">--</div>
              <div id="fng-label" class="text-slate-400">--</div>
              <div class="h-1.5 w-12 rounded-full bg-slate-800/80 overflow-hidden">
                 <div id="fng-bar" class="h-full w-0 bg-emerald-400 transition-all duration-500"></div>
              </div>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <span class="uppercase tracking-widest text-slate-500 font-normal">BTC Dom</span>
            <span id="btc-dom" class="font-mono text-slate-200 font-semibold">--%</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="uppercase tracking-widest text-slate-500 font-normal">Altseason</span>
            <span id="alt-season" class="font-mono text-slate-200 font-semibold">--</span>
          </div>
          <div class="hidden sm:flex items-center gap-4 text-slate-500">
            <div>Global Cap: <span id="global-mcap" class="text-slate-300 font-semibold">--</span></div>
            <div>Alt Cap <span class="text-[9px] opacity-70">(ex BTC/ETH)</span>: <span id="alt-mcap" class="text-slate-300 font-semibold">--</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toasts -->
  <div id="toast-container" class="fixed bottom-4 right-4 z-50 space-y-2 max-w-xs" role="status" aria-live="polite" aria-atomic="true"></div>

  <!-- MAIN -->
  <main class="flex-1">
    <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-10 py-6 sm:py-8 space-y-6 sm:space-y-8">

      <!-- SUMMARY STRIP -->
      <section>
        <div class="grid grid-cols-1 gap-4 sm:gap-5 md:grid-cols-4">
          <!-- Total -->
          <div class="md:col-span-2 rounded-2xl gradient-border glass-surface px-4 py-4 sm:px-5 sm:py-5 shadow-sm shadow-emerald-500/10">
            <div class="flex items-start justify-between gap-4">
              <div>
                <p class="text-[11px] font-normal uppercase tracking-[0.18em] text-slate-400">Total balance</p>
                <p id="total-value" class="mt-2 text-2xl sm:text-3xl font-bold tracking-tight">$0.00</p>
                <div class="mt-2 flex flex-wrap items-center gap-x-4 gap-y-1 text-[11px] sm:text-xs text-slate-400">
                  <div class="flex items-center gap-1.5">
                    <span class="inline-block h-1.5 w-1.5 rounded-full bg-emerald-400"></span>
                    <span>Cost basis</span>
                    <span id="total-cost" class="font-mono text-slate-100">$0.00</span>
                  </div>
                  <div class="flex items-center gap-1.5">
                    <span class="inline-block h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
                    <span>Unrealized P/L</span>
                    <span id="total-pnl" class="font-mono text-slate-100">--</span>
                    <span id="total-pnl-pct" class="font-mono text-[11px] text-slate-400"></span>
                  </div>
                </div>
              </div>
              <div class="hidden sm:flex flex-col items-end gap-2 text-[11px] text-slate-500">
                <div class="inline-flex items-center gap-2 rounded-full border border-slate-700 bg-slate-950/80 px-3 py-1.5">
                  <span class="text-[9px] uppercase tracking-[0.18em] text-slate-500">Assets</span>
                  <span id="assets-count" class="font-mono text-xs text-slate-100 font-semibold">0</span>
                </div>
                <p id="allocation-note" class="max-w-[12rem] text-right">
                  Keep majors heavy for smoother drawdowns.
                </p>
              </div>
            </div>
          </div>
          <!-- 24h P/L -->
          <div class="rounded-2xl glass-surface border border-slate-800 px-4 py-4 sm:px-4.5 sm:py-5">
            <p class="text-[11px] font-normal uppercase tracking-[0.18em] text-slate-400">24h P/L</p>
            <p id="day-pnl" class="mt-2 text-xl font-bold">$0.00</p>
            <p id="day-pnl-pct" class="mt-1 text-[11px] font-mono text-slate-400">--</p>
            <div id="day-spark" class="mt-2 sparkline"></div>
            <p class="mt-2 text-[11px] text-slate-500">Approx from per-asset 24h moves.</p>
          </div>
          <!-- Best -->
          <div class="rounded-2xl glass-surface border border-slate-800 px-4 py-4 sm:px-4.5 sm:py-5">
            <p class="text-[11px] font-normal uppercase tracking-[0.18em] text-slate-400">Best 24h</p>
            <p id="best-asset-name" class="mt-2 text-sm font-semibold">--</p>
            <p id="best-asset-change" class="mt-1 text-[11px] font-mono text-slate-400">--</p>
            <div id="best-spark" class="mt-2 sparkline"></div>
            <p class="mt-2 text-[11px] text-slate-500">Ignores tiny positions.</p>
          </div>
          <!-- Worst -->
          <div class="rounded-2xl glass-surface border border-slate-800 px-4 py-4 sm:px-4.5 sm:py-5">
            <p class="text-[11px] font-normal uppercase tracking-[0.18em] text-slate-400">Worst 24h</p>
            <p id="worst-asset-name" class="mt-2 text-sm font-semibold">--</p>
            <p id="worst-asset-change" class="mt-1 text-[11px] font-mono text-slate-400">--</p>
            <div id="worst-spark" class="mt-2 sparkline"></div>
            <p class="mt-2 text-[11px] text-slate-500">Helps find what to trim.</p>
          </div>
        </div>
      </section>

      <!-- MAIN GRID -->
      <section class="grid grid-cols-1 gap-6 lg:grid-cols-[minmax(0,2.1fr)_minmax(0,1.2fr)] items-start">

        <!-- LEFT COLUMN -->
        <div class="space-y-6 order-2 lg:order-1">

          <!-- PRICE CHART + TA -->
          <section class="rounded-2xl border border-slate-800 bg-slate-900/70 px-4 pt-4 pb-3 sm:px-5 sm:pt-5 sm:pb-4">
            <div class="flex flex-wrap items-center justify-between gap-3 mb-3">
              <div>
                <p class="text-[11px] font-medium uppercase tracking-[0.18em] text-slate-400">Portfolio curve & TA</p>
                <p class="mt-1 text-[11px] text-slate-500">
                  Synthetic equity curve (USD base) with indicators, drawing tools & chart types.
                </p>
              </div>
              <div class="flex flex-col items-end gap-2">
                <div class="inline-flex rounded-full border border-slate-800/80 bg-slate-950/70 p-1 text-[11px] gap-1 shadow-inner shadow-slate-900/70">
                  <button type="button" data-timeframe="24h"
                          class="timeframe-btn rounded-full px-3 py-1 font-semibold text-slate-300 pill-active transition focus-visible:outline-none">
                    24H
                  </button>
                  <button type="button" data-timeframe="7d"
                          class="timeframe-btn rounded-full px-3 py-1 text-slate-400 hover:text-slate-100 transition">
                    7D
                  </button>
                  <button type="button" data-timeframe="30d"
                          class="timeframe-btn rounded-full px-3 py-1 text-slate-400 hover:text-slate-100 transition">
                    30D
                  </button>
                </div>
              </div>
            </div>

            <!-- TA Controls -->
            <div class="mb-3 flex flex-wrap items-center justify-between gap-3 text-[10px] sm:text-[11px]">
              <div class="flex flex-wrap items-center gap-2">
                <span class="uppercase tracking-[0.18em] text-slate-500">Chart</span>
                <div class="inline-flex rounded-full border border-slate-700 bg-slate-950/80 p-0.5">
                  <button type="button" data-chart-type="line"
                          class="chart-type-btn rounded-full px-2.5 py-1 bg-slate-800 text-slate-100 shadow-[0_0_0_1px_rgba(148,163,184,0.55)]">
                    Line
                  </button>
                  <button type="button" data-chart-type="candles"
                          class="chart-type-btn rounded-full px-2.5 py-1 text-slate-400 hover:text-slate-100">
                    Candles
                  </button>
                  <button type="button" data-chart-type="bars"
                          class="chart-type-btn rounded-full px-2.5 py-1 text-slate-400 hover:text-slate-100">
                    Bars
                  </button>
                </div>
              </div>
              <div class="flex flex-wrap items-center gap-3">
                <div class="flex flex-wrap items-center gap-2">
                  <span class="uppercase tracking-[0.18em] text-slate-500">Indicators</span>
                  <label class="inline-flex items-center gap-1 text-slate-400">
                    <input id="indicator-bb" type="checkbox"
                           class="h-3 w-3 rounded border-slate-600 bg-slate-950 text-emerald-500 focus:ring-emerald-500">
                    <span>BB</span>
                  </label>
                  <label class="inline-flex items-center gap-1 text-slate-400">
                    <input id="indicator-rsi" type="checkbox"
                           class="h-3 w-3 rounded border-slate-600 bg-slate-950 text-emerald-500 focus:ring-emerald-500">
                    <span>RSI</span>
                  </label>
                  <label class="inline-flex items-center gap-1 text-slate-400">
                    <input id="indicator-macd" type="checkbox"
                           class="h-3 w-3 rounded border-slate-600 bg-slate-950 text-emerald-500 focus:ring-emerald-500">
                    <span>MACD</span>
                  </label>
                </div>
                <div class="flex flex-wrap items-center gap-2">
                  <span class="uppercase tracking-[0.18em] text-slate-500">Draw</span>
                  <select id="draw-tool-select"
                          class="rounded-full border border-slate-700 bg-slate-950/80 px-2.5 py-1 text-[11px] text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/70 focus:ring-o[...]">
                    <option value="none">None</option>
                    <option value="trendline">Trendline</option>
                    <option value="fib">Fib retracement</option>
                  </select>
                  <button type="button" id="draw-clear"
                          class="rounded-full border border-slate-700 bg-slate-950/80 px-2.5 py-1 text-[11px] text-slate-300 hover:border-slate-500 hover:text-slate-100">
                    Clear
                  </button>
                </div>
              </div>
            </div>

            <div class="relative h-64 sm:h-72">
              <canvas id="performance-chart" class="absolute inset-0 w-full h-full"></canvas>
              <div id="chart-empty"
                   class="absolute inset-0 flex items-center justify-center text-[11px] text-slate-500">
                Add at least one asset to see a simulated curve.
              </div>
            </div>
            <p class="mt-2 text-[10px] text-slate-500">
              Drawing: pick a tool, click once for the first point and again for the second. Fib uses your two points as range.
            </p>
          </section>

          <!-- ...rest of original file continues unchanged... -->
</div>
</body>
</html>
